(function(global,DOC,undefined){boot.declare('anim.hover','dom, event',function(Namespace,Frame,dom,event){Namespace.hover={bind:function(){if(arguments.length==0)return;var element=arguments[0];element=dom.get(element);if(!element)return;if(arguments.length==2){var hoverClass=arguments[1];this.bind(element,function(){dom.addClass(element,hoverClass)},function(){dom.removeClass(element,hoverClass)})}else if(arguments.length==3){var self=this,enterfn=arguments[1],leavefn=arguments[2];if(Frame.isIE){event.on(element,'mouseenter',enterfn);event.on(element,'mouseleave',leavefn)}else{event.on(element,'mouseover',function(evt){var c=evt.relatedTarget;if(this==c||dom.contain(this,c)){event.stop(evt);return}enterfn.apply(this,arguments)});event.on(element,'mouseout',function(evt){var c=evt.relatedTarget;if(this==c||dom.contain(this,c)){event.stop(evt);return}leavefn.apply(this,arguments)})}}}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('util.cookie','',function(Namespace,Frame){Namespace.cookie={get:function(name,encode){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;var j=0;while(i<clen){j=i+alen;if(document.cookie.substring(i,j)==arg)return this.getCookieVal(j,encode);i=document.cookie.indexOf(" ",i)+1;if(i==0)break}return null},set:function(name,value,expires,path,domain,secure){var argv=arguments;var argc=arguments.length;var now=new Date();var expires=(argc>2)?argv[2]:new Date(now.getFullYear(),now.getMonth()+1,now.getUTCDate());var path=(argc>3)?argv[3]:'/';var domain=(argc>4)?argv[4]:'.58.com';var secure=(argc>5)?argv[5]:false;document.cookie=name+"="+escape(value)+((expires==null)?"":("; expires="+expires.toGMTString()))+((path==null)?"":("; path="+path))+((domain==null)?"":("; domain="+domain))+((secure==true)?"; secure":"")},remove:function(name){if(this.get(name))this.set(name,"",new Date(1970,1,1))},getCookieVal:function(offset,encode){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length}if(encode==false)return document.cookie.substring(offset,endstr);else return unescape(document.cookie.substring(offset,endstr))}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('util.json','',function(Namespace,Frame){Namespace.json=new(function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Frame.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=='[object JSON]'}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o){if(!Frame.isDefined(o)||o===null){return"null"}else if(Frame.isArray(o)){return encodeArray(o)}else if(Frame.isDate(o)){return encodeDate(o)}else if(Frame.isString(o)){return encodeString(o)}else if(typeof o=="number"){return isFinite(o)?String(o):"null"}else if(Frame.isBoolean(o)){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(',')}a.push(doEncode(i),":",v===null?"null":doEncode(v));b=true}}}}a.push("}");return a.join("")}},m={"\b":'\\b',"\t":'\\t',"\n":'\\n',"\f":'\\f',"\r":'\\r','"':'\\"',"\\":'\\\\'},encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'},encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(',')}a.push(v===null?"null":Namespace.json.encode(v));b=true}}a.push("]");return a.join("")},encodeDate=function(o){return'new Date('+o.valueOf()+')'},encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}(),decode=function(){var dc;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}();Frame.apply(this,{encodeDate:encodeDate,encode:encode,decode:decode})})()})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('util.offset','dom',function(Namespace,Frame,dom){Namespace.offset={scroll:function(x,y){if(Frame.isEmpty(x))x="";if(Frame.isEmpty(y))y="";x=x+"",y=y+"";var ix,iy,ox=this.getScrollLeft(),oy=this.getScrollTop();if(Frame.isEmpty(x))ix=ox;else if(x.substring(0,1)=="+")ix=ox+parseInt(x.substring(1));else if(x.substring(0,1)=="-")ix=ox-parseInt(x.substring(1));else ix=parseInt(x);if(Frame.isEmpty(y))iy=oy;else if(y.substring(0,1)=="+")iy=oy+parseInt(y.substring(1));else if(y.substring(0,1)=="-")iy=oy-parseInt(y.substring(1));else iy=parseInt(y);this.setScrollLeft(ix);this.setScrollTop(iy)},getScrollWidth:function(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)},getScrollHeight:function(){return Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},getClientWidth:function(){return DOC.documentElement.clientWidth==0?DOC.body.clientWidth:Math.min(DOC.body.clientWidth,DOC.documentElement.clientWidth)},getClientHeight:function(){return DOC.documentElement.clientHeight==0?DOC.body.clientHeight:Math.min(DOC.body.clientHeight,DOC.documentElement.clientHeight)},getScrollLeft:function(){return document.documentElement.scrollLeft+document.body.scrollLeft},getScrollTop:function(){return document.documentElement.scrollTop+document.body.scrollTop},setScrollLeft:function(l){document.documentElement.scrollLeft=l;document.body.scrollLeft=l},setScrollTop:function(t){document.documentElement.scrollTop=t;document.body.scrollTop=t},getXY:function(el){var element=dom.get(el);if(!element)return null;var left=0,top=0;while(element.offsetParent){left+=element.offsetLeft+(element.currentStyle?(parseInt(element.currentStyle.borderLeftWidth))||0:0);top+=element.offsetTop+(element.currentStyle?(parseInt(element.currentStyle.borderTopWidth))||0:0);element=element.offsetParent}left+=element.offsetLeft+(element.currentStyle?(parseInt(element.currentStyle.borderLeftWidth))||0:0);top+=element.offsetTop+(element.currentStyle?(parseInt(element.currentStyle.borderTopWidth))||0:0);return{x:left,y:top}},getHW:function(el){var element=dom.get(el);if(!element)return null;return{height:element.offsetHeight,width:element.offsetWidth}},getRect:function(el){var element=dom.get(el);if(!element)return null;var xy=this.getXY(element);var hw=this.getHW(element);return{top:xy.y,bottom:xy.y+hw.height,left:xy.x,right:xy.x+hw.width,height:hw.height,width:hw.width}},getEl:function(p,x,y){var cns=p.children,cnrs=[];var c=null;for(var i=0;i<cns.length;i++){var rect=this.getRect(cns[i]);var diffX=Math.abs(rect.left-x)<Math.abs(rect.right-x)?Math.abs(rect.left-x):Math.abs(rect.right-x);var diffY=Math.abs(rect.top-y)<Math.abs(rect.bottom-y)?Math.abs(rect.top-y):Math.abs(rect.bottom-y);cnrs.push({rect:rect,target:cns[i],diffX:diffX,diffY:diffY,diff:diffX+diffY});if(rect.top<=y&&y<=rect.bottom&&rect.left<=x&&x<=rect.right){c=cnrs[i];break}}if(!c){var minDiff=cnrs[0];for(var i=1;i<cnrs.length;i++){if(cnrs[i].diff<minDiff.diff){minDiff=cnrs[i]}}c=minDiff}if(!c){return null}else{return{target:c.target,point:(x<(c.rect.left+c.rect.right)/ 2 ? 'L' : 'R') + (y < (c.rect.top + c.rect.bottom) /2?'T':'B')}}}}})})(this,this.document);var isFrameComplete=false;isFrameComplete=true;var is_cur_window_load_complete=false;is_cur_window_load_complete=true;var cacheinputvalue={};function getel(id){return document.getElementById(id)}function GetCookieValue(name){var arr=document.cookie.match(new RegExp(name+"=([^&;]+)"));return arr==null?"":decodeURI(arr[1])}function SetTipsCookie(){document.cookie="closetooltip=1;domain=.58.com;"}function FilterHtml(val){var v=val.replace(/(<cite.*?>.*?<.cite>)/ig,'').replace(/(<.*?>)/ig,'');if(val&&val!=''){v=val.replace(/(<cite.*?>.*?<.cite>)/ig,'').replace(/(<span.*?>.*?<.span>)/ig,'').replace(/(<.*?>)/ig,'')}else{v=''}return v}function QuanToBan(val){if(!val||val==''){return''}var result="";for(var i=0;i<val.length;i++){if(val.charCodeAt(i)==12288){result+=String.fromCharCode(val.charCodeAt(i)-12256);continue}if(val.charCodeAt(i)>65280&&val.charCodeAt(i)<65375)result+=String.fromCharCode(val.charCodeAt(i)-65248);else result+=String.fromCharCode(val.charCodeAt(i))}return result}function SetMouseOver(obj,toolWindowID){var wins=getel(toolWindowID);if(!wins)return;var lis=wins.getElementsByTagName('li');var i=0;if(lis&&lis.length>0){for(;i<lis.length;i++){lis[i].className='unselected'}}obj.className='selected'}function getElementPositionX(elem){var offsetTrail=elem;var offsetLeft=0;while(offsetTrail){offsetLeft+=offsetTrail.offsetLeft;offsetTrail=offsetTrail.offsetParent}if(navigator.userAgent.indexOf("Mac")!=-1&&typeof(document.body.leftMargin)!="undefined"){offsetLeft+=document.body.leftMargin}return offsetLeft}function getElementPositionY(elem){var offsetTrail=elem;var offsetTop=0;while(offsetTrail){offsetTop+=offsetTrail.offsetTop;offsetTrail=offsetTrail.offsetParent}if(navigator.userAgent.indexOf("Mac")!=-1&&typeof(document.body.leftMargin)!="undefined"){offsetTop+=document.body.topMargin}return offsetTop+elem.clientHeight+4}function ShowSelectedItem(itemID){if(itemID&&itemID!=null&&itemID!=''){var arr=itemID.split('|');var i=0;if(arr.length>0&&arr[0]=='0')i=2;for(;i<arr.length;i++){$("#"+arr[i]).css("display","inline")}}else $("select").css("display","inline")}function HideSelectedItem(itemID){if(itemID&&itemID!=null&&itemID!=''){var arr=itemID.split('|');var i=0;if(arr.length>0&&arr[0]=='0')i=2;for(;i<arr.length;i++){$("#"+arr[i]).css("display","none")}}else $("select").css("display","none")}function GetToolTipWindow(tooltipWindowID,inputbox,tooptipType,cityid,selid,showhot,iType){var arr=tooltipWindowID.split('|');if(arr.length>1&&arr[1]=='1'){this.tooltipWindowID=arr[0];this.showInstruction=true}else{this.tooltipWindowID=tooltipWindowID;this.showInstruction=false}this.inputbox=inputbox;this.tooptipType=tooptipType;this.cityid=cityid;if(selid)this.selid=selid;else this.selid='';this.notHideTips=false;this.buttonID='';if(showhot)this.showhot=true;else this.showhot=false;this.iType=iType;this.trainTip='';if(tooptipType=='8')this.trainTip='T1|D3|Z4|D98|C2001|Y563';if(tooptipType=='7')this.trainTip='北京|上海|深圳|广州|武汉|西安';cacheinputvalue[tooltipWindowID]={}}function SetToolTipData(contentData,tooltipWindowID,inputbox,tooltipType,selid,showInstruction,buttonID,showhot){var arr1=selid.split('|');if(arr1.length>1&&arr1[0]=='0')if(getel(arr1[1]))getel(arr1[1]).value=FilterHtml(contentData);if(contentData&&contentData.w&&contentData.w.length){var arr=contentData.w;var i=0;if(getel(tooltipWindowID))getel(tooltipWindowID).style.display='block';else return;var obj=getel(tooltipWindowID).getElementsByTagName('ul');var result="";var clsName='';var re;var hot='';for(i=0;i<arr.length;i++){if(!arr[i])continue;result+="<li class='"+clsName+"' onmouseover=\"SetMouseOver(this,'"+tooltipWindowID+"')\" onmouseout=\"this.className='unselected'\" onmousedown=\"SetInputValue(this,'"+inputbox+"','"+tooltipWindowID+"','"+selid+"','"+buttonID+"');return false\">";var key=arr[i].k;for(var j=0,lenj=arr[i].h.length;j<lenj;j++){key=key.replace(arr[i].h[j].v,'<b>'+arr[i].h[j].v+'</b>')}if(showhot&&arr[i].n){result+='<span class="tool_r">约&nbsp;'+arr[i].n+'&nbsp;条</span>'}result=result+"<a href='javascript:void(0)'>"+key;if(arr[i].s){result+='<cite>'+arr[i].s+'</cite>'}result+="</a>";result+="</li>"}obj[0].innerHTML=result;if(selid&&selid!='')HideSelectedItem(selid);var iframes=getel(tooltipWindowID).getElementsByTagName('iframe');if(iframes.length==1){iframes[0].style.height=getel(tooltipWindowID).offsetHeight+'px';iframes[0].style.width=getel(tooltipWindowID).offsetWidth+'px'}}else{if(getel(tooltipWindowID)){getel(tooltipWindowID).style.display='none';var obj=getel(tooltipWindowID).getElementsByTagName('ul');obj[0].innerHTML="";if(selid&&selid!='')ShowSelectedItem(selid)}else{if(selid&&selid!='')ShowSelectedItem(selid);return}}}function SetInputValue1(obj,inputbox,tooltipWindowID,selid,buttonID){var val='';if(obj){obj=obj.getElementsByTagName('a');if(obj.length>0){obj=obj[0]}}val=obj.innerHTML;if(val&&val!=''){val=FilterHtml(val)}var arr=inputbox.split('|');if(arr.length>1){if(getel(arr[0]))getel(arr[0]).value=val;if(getel(arr[1])){if(obj.innerHTML.match(/<cite.*?>(.*?)<.cite>/ig)&&obj.innerHTML.match(/<cite.*?>(.*?)<.cite>/ig).length>0){getel(arr[1]).value=obj.innerHTML.match(/<cite.*?>(.*?)<.cite>/ig)[0].replace(/(<.*?>)/ig,'');getel(arr[1]).value.setAttribute('data-intellisense',obj.innerHTML.match(/<cite.*?>(.*?)<.cite>/ig)[0].replace(/(<.*?>)/ig,''))}else{getel(arr[1]).value=''}}}else{if(getel(inputbox)){if(getel(inputbox))getel(inputbox).value=val;getel(inputbox).setAttribute('data-intellisense',val)}}_gaq.push(['pageTracker._trackEvent','58_search','tips',val])}function SetInputValue(obj,inputbox,tooltipWindowID,selid,buttonID){SetInputValue1(obj,inputbox,tooltipWindowID,selid,buttonID);if(getel(tooltipWindowID))getel(tooltipWindowID).style.display='none';if(buttonID!=''&&getel(buttonID))getel(buttonID).click();if(selid&&selid!=''){ShowSelectedItem(selid)}}GetToolTipWindow.prototype={openToolTipWindow:function(){var input=getel(this.inputbox.split('|')[0]);var m=this.tooltipWindowID+"mask";var tooltipid=this.tooltipWindowID;var selid=this.selid;this.closeToolTipWindow();var newDiv=document.createElement("div");newDiv.id=this.tooltipWindowID;newDiv.style.position="absolute";newDiv.style.zIndex="9999";newDiv.style.display='none';newDiv.style.top=getElementPositionY(input)+"px";newDiv.style.left=getElementPositionX(input)+"px";newDiv.className='tooltip';newDiv.innerHTML='<ul></ul><iframe src="about:blank" width="300" height="200" frameBorder="0" style="z-index:-1;position:absolute;top:0;left:0;border:0"></iframe>';document.body.appendChild(newDiv);var element=input,me=this;if(element.addEventListener){element.addEventListener("blur",function(){me.closeToolTipWindow()},false)}else if(element.attachEvent){element.attachEvent("onblur",function(){me.closeToolTipWindow()})}},GetContentData:function(){if(GetCookieValue('closetooltip')=='1'&&!this.notHideTips)return;var evt=null;if(document.all)evt=window.event;else evt=arguments[0]||arguments.callee.caller.arguments[0];if(evt!=null){switch(evt.keyCode){case 13:var temp=getel(this.tooltipWindowID);if(temp&&temp.style.display!='none'){var list=temp.getElementsByTagName('li');var i=0;if(list.length>0){for(i=0;i<list.length;i++){if(list[i].className&&list[i].className=='selected'){SetInputValue1(list[i],this.inputbox,'','','')}}}}if(this.selid&&this.selid!='')ShowSelectedItem(this.selid);this.closeToolTipWindow();if(this.buttonID!=''&&getel(this.buttonID)&&getel(this.buttonID).type=='button'){getel(this.buttonID).click()}return;case 38:var temp=getel(this.tooltipWindowID);if(temp&&temp.style.display!='none'){var list=temp.getElementsByTagName('li');var i=0;var hasselected=false;if(list.length>0){for(i=0;i<list.length;i++){if(list[i].className&&list[i].className=='selected'){hasselected=true;list[i].className='unselected';if(i>0){list[i-1].className='selected';if(getel(this.inputbox.split('|')[0])){if(list[i-1]){SetInputValue1(list[i-1],this.inputbox,'','','')}getel(this.inputbox.split('|')[0]).focus()}return}else{list[list.length-1].className='selected';if(getel(this.inputbox.split('|')[0])){if(list[list.length-1])SetInputValue1(list[list.length-1],this.inputbox,'','','');getel(this.inputbox.split('|')[0]).focus()}return}}}if(!hasselected){list[list.length-1].className='selected';if(getel(this.inputbox.split('|')[0])){if(getel(this.inputbox.split('|')[0])){if(list[list.length-1])SetInputValue1(list[list.length-1],this.inputbox,'','','');getel(this.inputbox.split('|')[0]).focus()}getel(this.inputbox.split('|')[0]).focus()}return}}}return;case 40:var temp=getel(this.tooltipWindowID);if(temp&&temp.style.display!='none'){var list=temp.getElementsByTagName('li');var i=0;var hasselected=false;if(list.length>0){for(i=0;i<list.length;i++){if(list[i].className&&list[i].className=='selected'){hasselected=true;list[i].className='unselected';if(i<list.length-1){list[i+1].className='selected';if(getel(this.inputbox.split('|')[0])){if(list[i+1])SetInputValue1(list[i+1],this.inputbox,'','','');getel(this.inputbox.split('|')[0]).focus()}return}else{list[0].className='selected';if(getel(this.inputbox.split('|')[0])){if(list[0])SetInputValue1(list[0],this.inputbox,'','','');getel(this.inputbox.split('|')[0]).focus()}return}}}if(!hasselected){list[0].className='selected';if(getel(this.inputbox.split('|')[0])){if(list[0])SetInputValue1(list[0],this.inputbox,'','','');getel(this.inputbox.split('|')[0]).focus()}return}}}return}}if(getel(this.inputbox.split('|')[0]).value==''){if(this.tooptipType=='7'||this.tooptipType=='8'){if(!getel(this.tooltipWindowID))this.openToolTipWindow();SetToolTipData(this.trainTip,this.tooltipWindowID,this.inputbox,this.tooptipType,this.selid,this.showInstruction,this.buttonID,this.showhot);return}if(this.selid&&this.selid!='')ShowSelectedItem(this.selid);this.closeToolTipWindow();return}if(!getel(this.tooltipWindowID))this.openToolTipWindow();GetToolTipInfoData(this.tooltipWindowID,this.inputbox,this.tooptipType,this.cityid,this.selid,this.showInstruction,this.buttonID,this.showhot,this.iType)},closeToolTipWindow:function(){if(this.selid&&this.selid!='')ShowSelectedItem(this.selid);var m=this.tooltipWindowID+"mask";if(getel(this.tooltipWindowID))document.body.removeChild(getel(this.tooltipWindowID));if(getel(m))document.body.removeChild(getel(m))},setNothideTips:function(){this.notHideTips=true},setSearchButton:function(buttonID){this.buttonID=buttonID},getSearchURL:function(){var url=window.location.href;if(getel(this.inputbox.split('|')[0]).value!=''){if(url.match(/key=[^&]+/ig))url=url.replace(/key=[^&]+/ig,'key='+encodeURI(getel(this.inputbox.split('|')[0]).value));else{if(url.indexOf('?')>0)url=url+'&key='+encodeURI(getel(this.inputbox.split('|')[0]).value);else url=url+'?key='+encodeURI(getel(this.inputbox.split('|')[0]).value)}}return url}};function GetToolTipInfoData(tooltipWindowID,inputbox,tooltipType,cityid,selid,showInstruction,buttonID,showhot,iType){var inputvalue=QuanToBan(document.getElementById(inputbox.split('|')[0]).value);if(cacheinputvalue[tooltipWindowID][inputvalue]!=undefined){SetToolTipData(cacheinputvalue[tooltipWindowID][inputvalue],tooltipWindowID,inputbox,tooltipType,selid,showInstruction,buttonID,showhot)}else{var showh=false;if(showhot){showh=true}var cateid;if(typeof ____json4fe!='undefined'){var j=____json4fe,m=j.modules,city=j.locallist&&j.locallist.length?j.locallist[0]:j.locallist,cate=j.catentry&&j.catentry.length?j.catentry[Math.min(j.catentry.length-1,1)]:j.catentry;cityid=city.dispid;cateid=cate.dispid}var url='',path='';url='http://suggest.58.com.cn';path='/searchsuggest_'+(iType?iType:1)+'.do';url+=path+"?inputbox="+encodeURIComponent(inputvalue)+"&cityid="+cityid+"&catid="+(cateid?cateid:'0');var callback="callback"+Math.random().toString().substring(2,6);window[callback]=function(data){cacheinputvalue[tooltipWindowID][inputvalue]=data;SetToolTipData(data,tooltipWindowID,inputbox,tooltipType,selid,showInstruction,buttonID,showh);window[callback]=null};url+="&callback="+callback;var script=document.createElement("SCRIPT");script.src=url;document.body.appendChild(script)}}﻿(function(global,DOC,undefined){boot.declare('business.gettuangou','config, dom, anim.hover, extension.string, util.js',function(Namespace,Frame,config,dom,hover,string,js){Namespace.gettuangou={interval:null,currentIndex:0,arrayElement:[],init:function(){var self=this,contianer=dom.get('tuanlist');if(!contianer){Frame.log('business.gettuangou','error','找不到tuanlist元素','');return}js.jsonp('http://track.58.com/adsys/frontpage/',{},function(data){if(!data.length)return;var tghtml=[];for(var i=0,leni=data.length;i<leni;i++){var shorttitle=(config.modules=='home'&&screen.width>=1280)?string.getShortText(data[i].title,60):string.getShortText(data[i].title,40);tghtml.push('<a href="'+data[i].url+'" title="'+data[i].title+'" '+(i!=0?'style="display:none;"':'')+' target="_blank">'+shorttitle+'</a>')}contianer.innerHTML="："+tghtml.join("");self.arrayElement=contianer.getElementsByTagName('a');self.start();hover.bind(contianer,function(){self.stop()},function(){self.start()})})},stop:function(){clearInterval(this.interval)},start:function(){var self=this,count=self.arrayElement.length;self.interval=setInterval(function(){if(self.arrayElement[self.currentIndex])self.arrayElement[self.currentIndex].style.display='none';if(self.currentIndex>=count-1){self.currentIndex=0}else{self.currentIndex++}if(self.arrayElement[self.currentIndex])self.arrayElement[self.currentIndex].style.display=''},5000)}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('util.uri','config, extension.string',function(Namespace,Frame,config,string){var uri=Namespace.uri=function(url){if(url){Frame.apply(this,uri.resolve(url))}else{Frame.apply(this,{protocol:location.protocol,host:location.host,hostname:location.hostname,port:location.port,pathname:location.pathname,search:location.search,hash:location.hash})}if(!url)url=location.href;var obj=uri.shred(url);this.path=obj.pp;this.query=obj.sp;if(this.path.jh){this.query.key=uri.encode(this.path.jh);delete this.path.jh}};uri.prototype={path:null,query:null,set:function(path,query){return this.setPath(path).setQuery(query)},get:function(objName){return this.path[objName]||this.query[objName]},setQuery:function(queryname,value){if(arguments.length==1&&Frame.isEmpty(arguments[0])){this.query={}}else if(arguments.length==2){this.query[queryname]=value}else if(arguments.length==1&&Frame.isObject(queryname)){Frame.apply(this.query,queryname)}return this},setPath:function(pathname,value){if(arguments.length==1&&Frame.isEmpty(arguments[0])){this.path={}}else if(arguments.length==2){this.path[pathname]=value}else if(arguments.length==1&&Frame.isObject(pathname)){Frame.apply(this.path,pathname)}return this},toString:function(){return uri.create({pp:this.path,sp:this.query})}};if(config.rootcate.listname=='house'){Frame.apply(uri,{urlpathRegExp:/^http:\/\/([^.]+)\.58\.com\/(?:([a-zA-Z_]+)\/)?([a-zA-Z]+)\/(?:jh_([^/]*)\/)?(?:(bus|sub)\/)?(?:l([^\/]+)\/)?(?:s([0-9_]+)\/)?(?:t(\d)\/)?(?:(0|1)\/)?(?:([a-zA-Z][0-9]+[a-zA-Z0-9]*)\/)?(?:pn(\d+)\/)?(?:size(\d+)\/)?(?:sort-([a-z|A-Z|0-9]+_[a-z|A-Z]+)\/)?/i,urlpathFormat:'http://{0}.58.com/{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}{11}',urlpathParams:[{name:'city',tpl:'{0}'},'local','cate',{name:'jh',tpl:'jh_{0}/'},'type',{name:'line',tpl:'l{0}/'},{name:'station',tpl:'s{0}/'},{name:'time',tpl:'t{0}/'},'biz','paras',{name:'page',tpl:'pn{0}/'},{name:'pagesize',tpl:'size{0}/'},{name:'sort',tpl:'sort-{0}/'}],pathFormatter:{},searchFormatter:{key:{encode:function(v){return uri.encode(v)}}}})}else if(config.catelist.length>=2&&config.catelist[1].listname=='shouji'){Frame.apply(uri,{urlpathRegExp:/^http:\/\/([^.]+)\.58\.com\/(?:([a-zA-Z]+)\/)?(?:([a-zA-Z]+)\/)(?:jh_([^/]*)\/)?(?:(0|1)\/)?(?:([a-zA-Z][0-9]+[a-zA-Z0-9]*)\/)?(?:pn(\d+)\/)?(?:size(\d+)\/)?(?:sort-([a-z|A-Z|0-9]+_[a-z|A-Z]+))?(?:\/)?(?:(pve_[^\/]+))?/i,urlpathFormat:'http://{0}.58.com/{1}{2}{3}{4}{5}{6}{7}{8}',urlpathParams:[{name:'city',tpl:'{0}'},'local','cate',{name:'jh',tpl:'jh_{0}/'},'biz','paras',{name:'page',tpl:'pn{0}/'},{name:'pagesize',tpl:'size{0}/'},{name:'sort',tpl:'sort-{0}/'},'pve'],pathFormatter:{},searchFormatter:{key:{encode:function(v){return uri.encode(v)}}}})}else{Frame.apply(uri,{urlpathRegExp:/^http:\/\/([^.]+)\.58\.com\/(?:([a-zA-Z]+)\/)?(?:([a-zA-Z]+)\/)(?:jh_([^/]*)\/)?(?:(0|1)\/)?(?:([a-zA-Z][0-9]+[a-zA-Z0-9]*)\/)?(?:pn(\d+)\/)?(?:size(\d+)\/)?(?:sort-([a-z|A-Z|0-9]+_[a-z|A-Z]+))?(?:\/)?/i,urlpathFormat:'http://{0}.58.com/{1}{2}{3}{4}{5}{6}{7}{8}',urlpathParams:[{name:'city',tpl:'{0}'},'local','cate',{name:'jh',tpl:'jh_{0}/'},'biz','paras',{name:'page',tpl:'pn{0}/'},{name:'pagesize',tpl:'size{0}/'},{name:'sort',tpl:'sort-{0}/'}],pathFormatter:{},searchFormatter:{key:{encode:function(v){return uri.encode(v)}}}})}Frame.apply(uri,{encode:function(value){return(Frame.isEmpty(value)?"":encodeURI(escape(value)))},decode:function(value){var ov=value,nv;var re4escape=new RegExp("%u[a-zA-Z0-9]{4}",'ig');var re4decodeuri=new RegExp("^((%[a-zA-Z0-9]{2})|([!#\$&'\(\)\*\+,-\./:;=\?@_~a-zA-Z0-9]))*$",'');if(re4escape.test(ov))nv=unescape(ov);else if(re4decodeuri.test(ov))nv=decodeURIComponent(ov);else nv=ov;if(ov!=nv)return this.decode(nv);else return nv},resolve:function(url){var self=this,u=url,re=/^(http|ftp|https):\/\/(\w*\.)+(\w*)/i,full=re.test(u),protocol=host=hostname=port=pathname=search=hash='';var index=-1,str=u,parts=[];if(full){index=str.indexOf(':');protocol=index!=-1?str.substring(0,index+1):'';str=str.substring(index+3);index=str.indexOf('/');if(index!=-1){parts=str.substring(0,index).split(':');if(parts[0]){host=parts[0];hostname=parts[0]}if(parts[1]){port=parts[1]}}str=str.substring(index+1)}var index1=str.indexOf('?'),index2=str.indexOf('#');if(index1!=-1){pathname=str.substring(0,index1);if(index2!=-1){search=str.substring(index1,index2-index1);host=str.substring(index2)}else{search=str.substring(index1);host=''}}if(index1==-1){if(index2!=-1){pathname=str.substring(0,index2);host=str.substring(index2)}else{pathname=str}}return{protocol:protocol,host:host,hostname:hostname,port:port,pathname:pathname,search:search,hash:hash}},shred:function(url){var self=this,arr=url.split('?'),path=arr.length>0?arr[0]:'',search=arr.length>1?arr[1]:'',pp={},sp={};if(path.charAt(path.length-1)!='/'){path+='/'}if(path&&self.urlpathRegExp){var m=self.urlpathRegExp.exec(path);if(m){for(var i=0,leni=self.urlpathParams.length,lenm=m.length-1;i<leni&&i<lenm;i++){if(m[i+1]){var v=m[i+1],name='';if(Frame.isString(self.urlpathParams[i])){name=self.urlpathParams[i]}else{name=self.urlpathParams[i].name}if(!Frame.isEmpty(name)&&!Frame.isEmpty(v)){if(self.pathFormatter[name]&&self.pathFormatter[name].decode)pp[name]=self.pathFormatter[name].decode(v);else pp[name]=decodeURIComponent(v)}}}}}if(search){var querys=search.split('&');for(var i=0,leni=querys.length;i<leni;i++){var temp=querys[i].split('=');if(temp.length!=2)continue;var name=temp[0],v=temp[1];if(!Frame.isEmpty(name)&&!Frame.isEmpty(v)){if(self.searchFormatter[name]&&self.searchFormatter[name].decode){sp[name]=self.searchFormatter[name].decode(v)}else{sp[name]=decodeURIComponent(v)}}}}return{pp:pp,sp:sp}},create:function(obj){if(!obj||!obj.pp)return'';var pp=obj.pp,sp=obj.sp,url,path,search,ppp=[],spp=[];ppp.push(this.urlpathFormat);for(var i=0,leni=this.urlpathParams.length;i<leni;i++){var name,v;if(Frame.isString(this.urlpathParams[i])){name=this.urlpathParams[i];v=pp[name]}else{name=this.urlpathParams[i].name;v=pp[name]}if(!Frame.isEmpty(name)&&!Frame.isEmpty(v)){if(this.pathFormatter[name]&&this.pathFormatter[name].encode){v=this.pathFormatter[name].encode(v)}else{v=encodeURIComponent(v)}if(Frame.isString(this.urlpathParams[i]))ppp.push(v+'/');else ppp.push(string.format(this.urlpathParams[i].tpl,v))}else ppp.push('')}path=string.format.apply(null,ppp);for(var query in sp){if(!Frame.isEmpty(sp[query])){if(this.urlsearchParams&&this.urlsearchParams[query]){spp.push(query+'='+this.urlsearchParams[query](sp[query]))}else{spp.push(query+'='+encodeURIComponent(sp[query]))}}}search=spp.join('&');url=path+(Frame.isEmpty(search)?'':'?'+search);return url}})})})(this,this.document);(function(global,DOC){boot.require('util.json,event,util.rookie',function(Frame,json,event,rookie){if(global.localStorage){boot.declare("util.superCookie","util.json,event",function(Namespace,Frame,json,event){Namespace.superCookie={};var localData;Frame.apply(Namespace.superCookie,{get:function(key){return json.decode(global.localStorage[key])},set:function(key,value){global.localStorage[key]=json.encode(value)},remove:function(key){global.localStorage.removeItem(key)},initData:function(obj){localData=obj;return localData}})})}else{try{console.log('flash sharedObject')}catch(e){}var loaded=false;window.isFlash=true;Rookie(function(){var that=this;boot.declare("util.superCookie","util.json,event",function(Namespace,Frame,json,event){Namespace.superCookie={};Frame.apply(Namespace.superCookie,{set:function(key,value){that.write(key,value)},get:function(key){return that.read(key)},remove:function(){}})})})}})})(this,this.document);var JSON;if(!JSON){JSON={}}(function(){"use strict";function f(n){return n<10?'0'+n:n}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key)}if(typeof rep==='function'){value=rep.call(holder,key,value)}switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null'}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null'}v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v)}}}}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v}}if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' '}}else if(typeof space==='string'){indent=space}rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify')}return str('',{'':value})}}if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j}throw new SyntaxError('JSON.parse')}}}());﻿(function(global,DOC,undefined){boot.declare('business.gettuangou4home','config, dom, anim.hover, extension.array, extension.string, util.js',function(Namespace,Frame,config,dom,hover,array,string,js){var gettuangou4home=Namespace.gettuangou4home=function(config){Frame.apply(this,config)};Frame.apply(gettuangou4home.prototype,{containerid:'toptuanad',count:0,init:function(){var self=this,container=dom.get(self.containerid);if(!container){Frame.log('business.gettuangou','error','找不到父容器','');return}dom.addClass(container,'toptuanad');js.appendScript({src:'http://t.58.com/advert/'+config.city.listname+'/show/',params:{callback:'json4tuangouhome'},type:'jsonp',refresh:true,onsuccess:function(data){if(!data||!data.length){Frame.log('business.gettuangou','waring','返回数据为空','');return}var count=data.length,pageCount=Math.round(count/2),ulhtml='',playerhtml='',frag=document.createDocumentFragment(),ul=dom.create('ul',{className:'tuanpic'}),player=dom.create('div',{className:'player'});for(var i=0,leni=count;i<leni;i++){ulhtml+='<li><h3><a href="'+data[i].adlink+'" title="'+data[i].title+'">'+string.getShortText(data[i].title,40)+'</a></h3><a href="'+data[i].adlink+'"><img align="left" src="'+data[i].img+'"></a>原价<b class="yuan">'+data[i].price+'</b>元<br>现价<b class="jiage">'+data[i].groupprice+'</b>元<br><input type="button" value="去看看" onclick="window.open(\''+data[i].adlink+'/\')"></li>'}if(count%2!=0){ulhtml+='<li><br /></li>'}for(var i=0,leni=count;i<leni&&i<2;i++){ulhtml+='<li><h3><a href="'+data[i].adlink+'" title="'+data[i].title+'">'+string.getShortText(data[i].title,40)+'</a></h3><a href="'+data[i].adlink+'"><img align="left" src="'+data[i].img+'"></a>原价<b class="yuan">'+data[i].price+'</b>元<br>现价<b class="jiage">'+data[i].groupprice+'</b>元<br><input type="button" value="去看看" onclick="window.open(\''+data[i].adlink+'/\')"></li>'}for(var i=0,leni=pageCount;i<leni;i++){(function(ci){player.appendChild(dom.create('span',{className:ci==0?'select':'',listeners:{click:function(){toIndex(ci==0?pageCount:ci)}}}))})(i)}ul.innerHTML=ulhtml;frag.appendChild(ul);frag.appendChild(player);var currentIndex=0,liWidth=319;container.innerHTML='';container.appendChild(frag);liWidth=ul.getElementsByTagName('li')[0]?ul.getElementsByTagName('li')[0].offsetWidth:319;ul.style.width=liWidth*(pageCount+2)*2+'px';ul.style.marginLeft='0px';function toIndex(index){if(index>=pageCount){index=0;toPostion(0-liWidth*2*(pageCount))}else{toPostion(0-liWidth*2*index)}player.getElementsByTagName('span')[currentIndex].className='';currentIndex=index;player.getElementsByTagName('span')[currentIndex].className='select'}function toPostion(postion){var currentPostion=parseFloat(ul.style.marginLeft)||0,step=(postion-currentPostion)/20,i=0;var postionInterval=setInterval(function(){if(i>=20){clearInterval(postionInterval);ul.style.marginLeft=postion+'px';if(currentIndex==0){ul.style.marginLeft='0px'}}else{ul.style.marginLeft=currentPostion+step*(i+1)+'px'}i++},30)}if(pageCount>=2){var interval=null;function start(){interval=setInterval(function(){toIndex(currentIndex+1)},5000)}function stop(){clearInterval(interval)}hover.bind(container,function(){stop()},function(){start()});start()}}})}})})})(this,this.document);boot.require('business.gettuangou4home',function(Frame,tuangou){Frame.init(function(){var a=new tuangou();a.containerid='toptuanad1';a.init()})});(function(global,DOC,undefined){boot.declare('util.rookie','',function(Namespace,Frame){if(!window.localStorage){var Rookie=window.Rookie=function(callBack){var i=1;(function(){if(Rookie.local=Rookie.getSWF("rookieswf")){(function(){i++;if(Rookie.asToJs){try{Rookie.local.available=Rookie.local.callAS()}catch(e){try{console.warn("But your DOMAIN is NOT ALLOWED.")}catch(e){};return}callBack.call(Rookie.local)}else{if(i>150){try{console.warn("But network failure,or check your swf file path,or browser do not support Flash")}catch(e){};return};setTimeout(arguments.callee,20)}})()}else{setTimeout(arguments.callee,20)}})()};Rookie.get_browser=function(){var ua=navigator.userAgent.toLowerCase();if(window.ActiveXObject){return"ie"};if(/firefox/i.test(ua)){return"firefox"};if(/chrome/i.test(ua)&&/webkit/i.test(ua)&&/mozilla/i.test(ua)){return"chrome"};if(window.opera){return"opera"};if(window.openDatabase){return"safari"};return"other"};Rookie.getSWF=function(movieName){if(window.document[movieName]){return window.document[movieName]}else{return document.getElementById(movieName)}};Rookie.swfReady=function(){Rookie.asToJs=true};Rookie.cross=function(){return Rookie.crossDomain};boot.require('dom',function(){var scripts=document.getElementsByTagName('script');var swfFile="http://pic2.58.com/js/file6/rookie.swf";if((/http:\/\//i).test(swfFile)&&swfFile.indexOf(window.location.host)==-1){Rookie.crossDomain=true}swfFile+="?"+Math.floor(Math.random()*100000);var flash='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="1" height="1" id="rookieswf"><param name="movie" value="'+swfFile+'" /><param name="allowScriptAccess" value="always" /><embed src="'+swfFile+'" width="1" height="1" name="rookieswf" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" /></object>';var flashCont=document.createElement("div");flashCont.className="flashCont";flashCont.id="flashCont";(function(){var doc=document;if(doc.body){flashCont.innerHTML=flash;doc.body.insertBefore(flashCont,doc.body.firstChild);doc.getElementById('flashCont').style.width='1px';doc.getElementById('flashCont').style.width='1px';doc.getElementById('flashCont').style.visibility='hidden';doc.getElementById('flashCont').style.position='absolute';doc.getElementById('flashCont').style.left=-2000+'em'}else{setTimeout(arguments.callee,15)}})()})}Namespace.rookie={}})})(this,this.document);boot.require('dom, business.topbar',function(Frame,dom,topbar){dom.onload('topbar',function(){topbar.init()})});(function(global,DOC,undefined){boot.require('config, dom, extension.string',function(Frame,config,dom,string){window.b_query=function(){var input=dom.get('keyword'),value=input.value,fdv=input.getAttribute('fdv');if(value==fdv){value=''}value=value.replace(/([^\u0391-\uFFE5a-zA-Z0-9 ])/ig,'');if(value==''){window.location.reload()}else{if(config.city.listname=='quanguo'){window.location.href='/sou/jh_'+string.trim(value)+'/'+(input.value==input.getAttribute('data-intellisense')?'?sourcetype=1':'')}else{window.location.href='/sou/jh_'+string.trim(value)+'/final_1/'+(input.value==input.getAttribute('data-intellisense')?'?sourcetype=1':'')}}}});boot.require('dom, general.defaultvalue',function(Frame,dom,defaultvalue){dom.onload('keyword',function(){defaultvalue.init();dom.get('keyword').focus()})});boot.require('dom, business.hotkey',function(Frame,dom,hotkey){dom.onload('hot',function(){hotkey.init()})});boot.require('config, dom, util.offset',function(Frame,config,dom,offset){if(config.city.listname!='bj')return;Frame.init(function(){var div=dom.create("div",{id:'infomsg',html:'<a class="close" target="_self" onclick="_gaq.push([\'pageTracker._trackEvent\', \'58_home_warning\', \'close\', \'click\']);document.getElementById(\'infomsg\').className=\'hc\';" href="javascript:void(0)"></a><br /><a href="http://about.58.com/fqz/"><img src="http://pic2.58.com/zt/dj/images/zt-dj-w3.gif" /></a>'});document.body.appendChild(div);if(Frame.isIE6){div.style.position='absolute';div.style.right='0px';div.style.top=offset.getScrollTop()+offset.getClientHeight()-div.offsetHeight-2+"px";var interval=setInterval(function(){div.style.top=offset.getScrollTop()+offset.getClientHeight()-div.offsetHeight-2+"px"},500)}else{div.style.position='fixed';div.style.bottom='0px';div.style.right='0px'}setTimeout(function(){dom.hide(div)},5000)})});})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.getlocal','config, dom, event, util.cookie, util.js',function(Namespace,Frame,config,dom,event,cookie,js){Namespace.getlocal={arr1:['bj|北京','tj|天津','sh|上海','cq|重庆','tw|台湾','hk|香港','am|澳门','sz|深圳','dl|大连','su|苏州','cn|其他'],arr2:[["sjz|石家庄","bd|保定","cangzhou|沧州","chengde|承德","dingzhou|定州","gt|馆陶","hd|邯郸","hs|衡水","lf|廊坊","qhd|秦皇岛","ts|唐山","xt|邢台","zjk|张家口","zd|正定","zx|赵县","zhangbei|张北"],["zz|郑州","ay|安阳","changge|长葛","hb|鹤壁","jiaozuo|焦作","jiyuan|济源","kaifeng|开封","luoyang|洛阳","luohe|漯河","mg|明港","ny|南阳","pds|平顶山","puyang|濮阳","sq|商丘","smx|三门峡","xx|新乡","xc|许昌","xy|信阳","yuzhou|禹州","yanling|鄢陵","zk|周口","zmd|驻马店"],["hrb|哈尔滨","dq|大庆","dxal|大兴安岭","hegang|鹤岗","heihe|黑河","jms|佳木斯","jixi|鸡西","mdj|牡丹江","qqhr|齐齐哈尔","qth|七台河","suihua|绥化","sys|双鸭山","yich|伊春"],["cc|长春","bc|白城","baishan|白山","jl|吉林","liaoyuan|辽源","songyuan|松原","sp|四平","th|通化","yanbian|延边"],["sy|沈阳","as|鞍山","benxi|本溪","cy|朝阳","dl|大连","dandong|丹东","fushun|抚顺","fx|阜新","hld|葫芦岛","jinzhou|锦州","liaoyang|辽阳","pj|盘锦","tl|铁岭","wfd|瓦房店","yk|营口","pld|庄河"],["jn|济南","bz|滨州","dz|德州","dy|东营","heze|菏泽","jining|济宁","kl|垦利","linyi|临沂","lc|聊城","lw|莱芜","qd|青岛","rizhao|日照","ta|泰安","wf|潍坊","weihai|威海","yt|烟台","zb|淄博","zaozhuang|枣庄","zhangqiu|章丘","zc|诸城"],["hu|呼和浩特","alsm|阿拉善盟","bt|包头","bycem|巴彦淖尔盟","chifeng|赤峰","erds|鄂尔多斯","hlbe|呼伦贝尔","hlr|海拉尔","tongliao|通辽","wuhai|乌海","wlcb|乌兰察布","xl|锡林郭勒盟","xam|兴安盟"],["nj|南京","cz|常州","dafeng|大丰","ha|淮安","lyg|连云港","nt|南通","su|苏州","shuyang|沭阳","suqian|宿迁","taizhou|泰州","wx|无锡","xz|徐州","yz|扬州","yancheng|盐城","zj|镇江"],["hf|合肥","anqing|安庆","bengbu|蚌埠","bozhou|亳州","ch|巢湖","chizhou|池州","chuzhou|滁州","fy|阜阳","hn|淮南","huaibei|淮北","huangshan|黄山","hexian|和县","hq|霍邱","la|六安","mas|马鞍山","suzhou|宿州","tongling|铜陵","tongcheng|桐城","wuhu|芜湖","xuancheng|宣城"],["ty|太原","changzhi|长治","dt|大同","jincheng|晋城","jz|晋中","lvliang|吕梁","linfen|临汾","linyixian|临猗","qingxu|清徐","shuozhou|朔州","xinzhou|忻州","yuncheng|运城","yq|阳泉"],["xa|西安","ankang|安康","baoji|宝鸡","hanzhong|汉中","sl|商洛","tc|铜川","wn|渭南","xianyang|咸阳","yanan|延安","yl|榆林"],["lz|兰州","by|白银","dx|定西","gn|甘南","jinchang|金昌","jyg|嘉峪关","jq|酒泉","linxia|临夏","ln|陇南","pl|平凉","qingyang|庆阳","tianshui|天水","wuwei|武威","zhangye|张掖"],["hz|杭州","huzhou|湖州","jx|嘉兴","jh|金华","lishui|丽水","nb|宁波","quzhou|衢州","sx|绍兴","tz|台州","wz|温州","yiwu|义乌","zhoushan|舟山"],["nc|南昌","fuzhou|抚州","ganzhou|赣州","jj|九江","ja|吉安","jdz|景德镇","px|萍乡","sr|上饶","xinyu|新余","yingtan|鹰潭","yichun|宜春","yxx|永新"],["wh|武汉","es|恩施","ez|鄂州","hshi|黄石","hg|黄冈","jingzhou|荆州","jingmen|荆门","qianjiang|潜江","shiyan|十堰","snj|神农架","suizhou|随州","tm|天门","xf|襄阳","xiaogan|孝感","xiantao|仙桃","xianning|咸宁","yc|宜昌"],["cs|长沙","changde|常德","chenzhou|郴州","hy|衡阳","hh|怀化","ld|娄底","shaoyang|邵阳","xiangtan|湘潭","xiangxi|湘西","yy|岳阳","yongzhou|永州","yiyang|益阳","zhuzhou|株洲","zjj|张家界"],["gy|贵阳","anshun|安顺","bijie|毕节","lps|六盘水","qdn|黔东南","qn|黔南","qxn|黔西南","tr|铜仁","zunyi|遵义"],["cd|成都","ab|阿坝","bazhong|巴中","deyang|德阳","dazhou|达州","ga|广安","guangyuan|广元","ganzi|甘孜","ls|乐山","luzhou|泸州","liangshan|凉山","mianyang|绵阳","ms|眉山","scnj|内江","nanchong|南充","panzhihua|攀枝花","suining|遂宁","yb|宜宾","ya|雅安","zg|自贡","zy|资阳"],["km|昆明","bs|保山","cx|楚雄","dali|大理","diqing|迪庆","dh|德宏","honghe|红河","lj|丽江","lincang|临沧","nujiang|怒江","pe|普洱","qj|曲靖","ws|文山","bn|西双版纳","yx|玉溪","zt|昭通"],["xj|乌鲁木齐","aks|阿克苏","ale|阿拉尔","bygl|巴音郭楞","betl|博尔塔拉","changji|昌吉","hami|哈密","ht|和田","klmy|克拉玛依","kel|库尔勒","ks|喀什","kzls|克孜勒苏","shz|石河子","tlf|吐鲁番","tmsk|图木舒克","wjq|五家渠","yili|伊犁"],["yinchuan|银川","guyuan|固原","szs|石嘴山","wuzhong|吴忠","zw|中卫"],["xn|西宁","guoluo|果洛","huangnan|黄南","hx|海西","haidong|海东","haibei|海北","hainan|海南","ys|玉树"],["lasa|拉萨","al|阿里","changdu|昌都","linzhi|林芝","nq|那曲","rkz|日喀则","sn|山南"],["nn|南宁","baise|百色","bh|北海","chongzuo|崇左","fcg|防城港","gl|桂林","gg|贵港","hc|河池","hezhou|贺州","liuzhou|柳州","lb|来宾","qinzhou|钦州","wuzhou|梧州","yulin|玉林"],["gz|广州","chaozhou|潮州","dg|东莞","fs|佛山","huizhou|惠州","heyuan|河源","jm|江门","jy|揭阳","mm|茂名","mz|梅州","qingyuan|清远","sd|顺德","sz|深圳","st|汕头","sg|韶关","sw|汕尾","taishan|台山","yj|阳江","yangchun|阳春","yf|云浮","zh|珠海","zs|中山","zhanjiang|湛江","zq|肇庆"],["fz|福州","ly|龙岩","nd|宁德","np|南平","pt|莆田","qz|泉州","sm|三明","wuyishan|武夷山","xm|厦门","zhangzhou|漳州"],["haikou|海口","sanya|三亚","wzs|五指山"]],containerid:'ipconfig',cookiekey:'ipcity',init:function(){var self=this;var v=cookie.get(self.cookiekey);if(v){var c=v.split('|');if(config.city.listname==c[0])return;else{self.addCityLink(c[0],c[1])}}else{js.jsonp("http://user.58.com/userdata/getlocal/",null,function(data){if(data&&data.list){var now=new Date();var day=new Date(now.getFullYear(),now.getMonth(),now.getDate()+1);cookie.set(self.cookiekey,data.list+'|'+data.local,day);if(Frame.isEmpty(data.list))return;if(config.city.listname!=data.list){self.addCityLink(data.list,data.local)}else{var re=new RegExp("^"+config.city.listname+'\\|'),sh;for(var i=0,leni=self.arr1.length;i<leni;i++){if(re.test(self.arr1[i]))return}for(var i=0,leni=self.arr2.length;i<leni;i++){for(var j=0,lenj=self.arr2[i].length;j<lenj;j++){if(re.test(self.arr2[i][j])){if(j==0)return;sh=self.arr2[i][0].split('|');self.addCityLink(sh[0],sh[1]);cookie.set(self.cookiekey,sh[0]+'|'+sh[1],day);break}}}}}})}},addCityLink:function(list,local){var self=this,element=dom.get(self.containerid);if(!element)return;var a=element.getElementsByTagName('a')[0];var na=dom.create("A",{id:'link_city_change',href:'http://'+list+'.58.com/'+((config.isList||config.isFinal)&&config.cate?config.cate.listname+"/":""),target:'_self',html:local,listeners:{click:function(){cookie.set('city',list);cookie.set('58home',list)}}});element.insertBefore(na,a);element.insertBefore(a,na)}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.history','dom, extension.string, util.cookie, util.js',function(Namespace,Frame,dom,string,cookie,js){Namespace.history={loadingText:'正在加载数据',nodataText:'暂无浏览记录...',loadfailText:'数据加载失败...',cookie_key_final:'final_history',data_url_final:'http://user.58.com/userdata/getinfo/',finalRecordCount:5,recordFinal:function(infoid){his=cookie.get(this.cookie_key_final)||"";var re=new RegExp(infoid,'ig');his=his.replace(re,'').replace(/,+/g,',').replace(/(^,)|(,$)/g,'');if(Frame.isEmpty(his))his=infoid;else his=infoid+','+his;his=his.split(',').slice(0,this.finalRecordCount).join(',');cookie.set(this.cookie_key_final,his);},getdateFinal:function(){var ids=cookie.get(this.cookie_key_final),container=dom.get("feet_final"),self=this;if(!container)return;if(ids){ids=ids.split(',').slice(0,this.finalRecordCount).join(',');container.innerHTML='<li>'+this.loadingText+'</li>';js.jsonp(this.data_url_final,{ids:ids,type:6},function(data){if(data&&data.length){var html='';var tpl='<li><a href="{0}">{1}</a></li>';for(var i=0,leni=data.length;i<leni;i++){html+=string.format(tpl,data[i].url,data[i].title.length>16?data[i].title.substring(0,14)+'...':data[i].title)}container.innerHTML=html}else{container.innerHTML='<li>'+self.nodataText+'</li>'}},function(){container.innerHTML='<li>'+self.loadfailText+'</li>'})}else{container.innerHTML='<li>'+self.nodataText+'</li>'}}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.hotkey','config, dom, event',function(Namespace,Frame,config,dom,event){Namespace.hotkey={containerid:'hot',keyCount:5,init:function(){var self=this,container=dom.get(self.containerid);if(!container)return;var elements=container.getElementsByTagName('A'),keyElements=[];if(!elements.length)return;Frame.each(elements,function(item){dom.hide(item)});elements=Frame.toArray(elements);for(var i=0,leni=self.keyCount;i<leni&&elements.length;i++){var no=parseInt(Math.random()*elements.length);keyElements=keyElements.concat(elements.splice(no,1))}for(var i=0,leni=keyElements.length;i<leni;i++){keyElements[i].style.display='inline';event.on(keyElements[i],'click',function(){_gaq.push(['pageTracker._trackEvent','58_home_hotkey',config.city.listname,this.innerHTML])})}}}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.topbar','config, dom, event, anim.hover, extension.string, util.cookie, util.uri',function(Namespace,Frame,config,dom,event,hover,string,cookie,uri){Namespace.topbar={loaded:false,init:function(){if(this.loaded)return false;this.loaded=true;var pminfo='';if(config.isHome)pminfo='?utm_source=58.com_homeheader';else if(config.isTopList||config.isList)pminfo='?utm_source=58.com_listheader';else if(config.isFinal)pminfo='?utm_source=58.com_detailheader';else if(config.isMy)pminfo='?utm_source=58.com_myheader';var html='<div class="w pos">';if(config.isHome||config.isTopList||config.isList||config.isFinal||config.isPost){html+='<div class="bar_left">';if(/whbm\.shtml/ig.test(location.pathname)){html+='<h2>'+config.city.name+'</h2>'}else if(config.isList){html+='<h2>'+config.city.name+'</h2> <span id="ipconfig">[<a href="http://www.58.com/'+config.cate.listname+'/changecity/" target="_self">切换城市</a>]</span><span class="gap">|</span>'}else if(config.isHome){html+='<h2>'+config.city.name+'</h2> <span id="ipconfig">[<a href="http://www.58.com/index.htm" target="_self">切换城市</a>]</span><span class="gap">|</span>'}else{html+='<h2>'+config.city.name+'</h2> <span id="ipconfig">[<a href="http://www.58.com/changecity.aspx" target="_self">切换城市</a>]</span><span class="gap">|</span>'}html+='<span class="tuan"><a target="_blank" href="http://t.58.com/'+pminfo+'">58团购</a><span id="tuanlist" class="c_999"></span></span>';html+='</div>'}else if(config.isMy){if(cookie.get('58Wlt')){html+='<div class="bar_left">';html+='<a href="http://vip.58.com/" style="color:#0000CC;" title="切换到VIP用户中心">切换到VIP用户中心</a>';html+='</div>'}}html+='<div class="bar_right">';if(!config.isHome){html+='<div id="modify"><a href="http://'+(config.city.listname||'www')+'.58.com/">58同城首页</a><span class="gap">|</span></div>'}html+='<div id="myfeet" class="haschild">浏览记录<span class="arrow"></span><div id="myfeetBox" class="hc"><ul id="feet_final"><li>数据加载中...</li></ul><i class="shadow"></i></div>';if(cookie.get('myfeet_tooltip')!='end'){html+='<!---气泡---><div id="myfeet_tooltip" class="msgTips"><i class="msgTips_arrow"></i><div class="msgTips_con">您的浏览可以被记录啦！</div><i class="shadow"></i></div>'}html+='</div> ';if(!config.isHome){html+='<div id="minsearch" class="haschild">搜索<span class="arrow"></span> <div id="minsearchBox" class="hc"> <input class="keyword" autocomplete="off" value="" id="minsearchkeyword" type="text"> <input id="minsearchsearchbtn" type="button" value="" > <i class="shadow"></i></div></div> '}html+='<div id="login"><a href="http://passport.58.com/login/">登录</a><span class="gap">|</span><a href="http://passport.58.com/reg/">注册</a></div>';html+='    <div id="sitemap" class="haschild">导航<span class="arrow"></span> <div id="sitemapBox" class="hc">';html+=string.format('    	<div class="maplist"> <a href="{0}/house.shtml">房产</a>：<a href="{0}/zufang/">租房</a> &nbsp; <a href="{0}/ershoufang/">买房</a> &nbsp; <a href="{0}/duanzu/">短租</a><br><a href="{0}/sale.shtml">二手</a>：<a href="{0}/diannao/">电脑</a> &nbsp; <a href="{0}/shouji/">手机</a> &nbsp; <a href="{0}/jiadian/">家电</a><br><a href="{0}/job.shtml">招聘</a>：<a href="{0}/yewu/">销售</a> &nbsp; <a href="{0}/kefu/">客服</a> &nbsp; <a href="{0}/zpshengchankaifa/">普工</a><br><a href="{0}/car.shtml">车辆</a>：<a href="{0}/ershouche/">汽车</a> &nbsp; <a href="{0}/zuche/">租车</a> &nbsp; <a href="{0}/pinche/">拼车</a><br><a href="{0}/searchjob.shtml">求职</a> &nbsp; <a href="{0}/jianzhi.shtml">兼职</a> &nbsp; <a href="{0}/huangye/">黄页</a> &nbsp; <a href="{0}/jiaoyu.shtml">培训</a><br><a href="{0}/piaowu.shtml">票务</a> &nbsp; <a href="{0}/lvyouxiuxian.shtml">旅游</a> &nbsp; <a href="{0}/pets.shtml">宠物</a> &nbsp; <a href="{0}/jiaoyou.shtml">交友</a>  </div>','http://'+(config.city.listname||'www')+'.58.com');html+='		<div class="mapfuc">';html+='<a href="http://t.58.com/'+pminfo+'" class="c_r">同城团购&nbsp;&nbsp;&nbsp;每日一团»</a> <br>';html+='<a href="http://post.58.com/t/">免费发布</a> &nbsp; ';html+='<a href="http://about.58.com/info/del-menu.html">删除信息</a><br>';html+='<a href="http://about.58.com/yinsibaohu.html?utm_source=top-navigation&utm_medium=58call&utm_campaign=link-click">58隐私保护助手</a><br>';html+='<a href="http://wap.58.com/wap.html">手机畅游58同城</a> <br>';html+='<a href="http://vip.58.com/product/index.html">58同城网邻通</a> <br>';html+='<a class="fduihua" href="http://about.58.com/">帮助中心</a></div>';html+='	<i class="shadow"></i></div></div>';dom.get('topbar').innerHTML=html;if(cookie.get('myfeet_tooltip')!='end'){var tooltipHidden=false,hideTooltip=function(){if(tooltipHidden)return;dom.hide('myfeet_tooltip');cookie.set('myfeet_tooltip','end');tooltipHidden=true};event.on('myfeet_tooltip','mouseover',hideTooltip);setTimeout(hideTooltip,5000)}event.once('myfeet','mouseover',function(){boot.require('business.history',function(Frame,history){history.getdateFinal()})});hover.bind('myfeet','hover');if(!config.isHome){hover.bind('minsearch','hover');function minsubmit(){var key=dom.get('minsearchkeyword').value;key=key.replace(/([^\u0391-\uFFE5a-zA-Z0-9 ])/ig,'');if(key){location.href='http://'+config.city.listname+'.58.com/sou/jh_'+key+'/final_1/'}else{location.href='http://'+config.city.listname+'.58.com/sou/'}}event.on('minsearchkeyword','keyup',function(evt){if(evt!=null&&evt.keyCode==13){minsubmit()}});event.on('minsearchsearchbtn','click',function(){minsubmit()})}hover.bind('sitemap','hover');boot.require('dom, business.getlocal',function(Frame,dom,getlocal){dom.onload('ipconfig',function(){getlocal.init()})});boot.require('dom, business.gettuangou',function(Frame,dom,gettuangou){dom.onload('tuanlist',function(){gettuangou.init()})});boot.require('dom, business.user',function(Frame,dom,user){dom.onload('login',function(){user.containerid='login';user.show()})})}};Namespace.topbar.loaded})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.user','config, dom, event, extension.array, extension.string, util.cookie, util.js',function(Namespace,Frame,config,dom,event,array,string,cookie,js){Namespace.user={containerid:"logintext",loginurl:'http://passport.58.com/login/',logouturl:'http://my.58.com/ajax/loginout/',simloginurl:'http://my.58.com/simlogin/?type=ajax&radom=',isLogin:function(){var userid=this.get('UserID');if(Frame.isEmpty(userid))return false;try{userid=parseInt(userid);if(userid<=2)return false;else return true}catch(e){return false}},get:function(name){var cookieValue=cookie.get("www58com",false);if(!cookieValue)return null;var ms=cookieValue.match(new RegExp(name+"=([^&;]+)"));if(ms&&ms.length==2){return decodeURIComponent(ms[1])}else{return null}},login:function(){var self=this;boot.require('widgets.window',function(Frame,win){win.getInstance().show("登录",self.simloginurl,300,200,true)})},logout:function(){var self=this;js.jsonp(this.logouturl,null,function(){self.show();Frame.log('business.user','success','用户成功注销')},function(){Frame.log('business.user','error','用户注销失败')})},show:function(){var self=this,container=dom.get(self.containerid),outurl=escape(location.href);if(!container){Frame.log('business.user','error','找不到父容器');return}var isNtalker=true;if(isNtalker){if(self.isLogin()){ims_siteid='58';ims_userid=self.get("UserID");ims_username=self.get("UserName");ims_sessionid=self.get('SiteKey');ims_callback=function(sessionRequestCount){var emailCount;if(cookie.get('ntalker-msgTips_close')){emailCount=0}else{emailCount=parseInt(self.get("MsgUnReadTotal"))+parseInt(self.get("SystemUnReadTotal"))+parseInt(self.get("RequireFriendUnReadTotal"))+parseInt(self.get("CommentUnReadTotal"))}var messageCount=sessionRequestCount;if(emailCount>0||messageCount>0){var str='<i class="msgTips_arrow"></i><em id="ntalker-msgTips_close" class="msgTips_close"></em><div class="msgTips_con ntTips_con">';if(messageCount>0){str+='<span class="num">{0}</span>条即时消息，<a id="ntalker-msgTips-show" href="http://my.58.com/index/?menu=0" target="_blank">点击查看</a><br>'}if(emailCount>0){str+='<span class="num">{1}</span>条站内信，<a href="http://my.58.com/msgrev/0/0/?menu=10" target="_blank">点击查看</a><br>'}str+='</div><i class="shadow"></i>';var element=dom.get('ntalker-msgTips');element.innerHTML=string.format(str,messageCount,emailCount);element.style.display='';event.on('ntalker-msgTips_close','click',function(){dom.hide(element);var now=new Date();var to=new Date(now.getFullYear(),now.getMonth(),now.getDate()+1);cookie.set('ntalker-msgTips_close','true',to)});event.on('ntalker-msgTips-show','click',function(){dom.hide('ntalker-msgTips');__connect&&__connect.clear()})}};js.append('http://pic2.58.com/ntalker/res/impresence.js');var tplUserinfo='<span class="user_id">{0}</span>'+'<span class="user_center"><a target="_self" href="http://my.58.com/">我的58</a></span>'+'<span class="user_ntalker"><div id="ntalker-msgTips" class="msgTips ntTips" style="display:none;"></div></span>';tplUserinfo+='<span class="user_i"><a id="user-logout" target="_self" href="http://passport.58.com/logout?path={1}&back=now" title="'+(self.get('AutoLogin')=='true'?'安全退出，同时您的自动登录将失效。':'')+'">退出</a></span>';container.innerHTML=string.format(tplUserinfo,self.get("UserName"),outurl);event.on('user-logout','click',function(){cookie.remove('ntalker-msgTips_close')});ims_callback(0)}else{var tplLogin='<a href="http://passport.58.com/login/?path={0}" target="_self">登录</a>'+'<span class="gap">|</span>'+'<a href="http://passport.58.com/reg/?city={1}" target="_self">注册</a>';container.innerHTML=string.format(tplLogin,outurl,config.city.listname)}return}else{var loginStr='<a href="http://passport.58.com/login/?path={0}" target="_self">登录</a><span class="gap">|</span><a href="http://passport.58.com/reg/" target="_self">注册</a>',userinfoStr='{0}{1}<a href="http://my.58.com/" target="_self" style="margin:0 10px">我的58</a><a href="http://passport.58.com/logout?path={2}&back=now" target="_self">退出</a>',messageStr='(<span class="red"><a style="color:#F00;margin: 0px;" href="http://my.58.com/liuyanjieshou/" title="你有{0}条未读短信息">{0}</a></span>)',host=window.location.hostname,hosthome=host.substr(0,host.indexOf("."));if(!(document.cookie!=null&&document.cookie!=''&&document.cookie!='undefined')){var exp=new Date();exp.setTime(exp.getTime()+30*24*60*60*1000);document.cookie="supportcookie=true;domain=58.com;expires="+exp.toGMTString();if(!(document.cookie!=null&&document.cookie!=''&&document.cookie!='undefined')){container.innerHTML=string.format(loginStr,outurl,hosthome);return}Frame.log('business.user','waring','客户端禁用cookie，显示未登录状态')}try{if(this.isLogin()){var msgcount=parseInt(this.get("MsgUnReadTotal"))+parseInt(this.get("SystemUnReadTotal"))+parseInt(this.get("RequireFriendUnReadTotal"))+parseInt(this.get("CommentUnReadTotal"));container.innerHTML=string.format(userinfoStr,this.get("UserName"),msgcount>0?string.format(messageStr,msgcount):'',outurl)}else{container.innerHTML=string.format(loginStr,outurl,hosthome)}return}catch(e){container.innerHTML=string.format(loginStr,outurl,hosthome);Frame.log('business.user','error','显示用户信息异常',e)}}}}})})(this,this.document);﻿(function(global,DOC,undefined){if(typeof ____json4fe=='undefined')return;boot.declare('config','',function(Namespace,Frame){var j=____json4fe,city=cate=locallist=catelist=null;if(j.locallist){if(Frame.isArray(j.locallist)){city=j.locallist[0];locallist=j.locallist}else{city=j.locallist;locallist=[city]}}if(j.catentry){if(Frame.isArray(j.catentry)){cate=j.catentry[j.catentry.length-1];catelist=j.catentry}else{cate=j.catentry;catelist=[cate]}if(j.rootcatentry){catelist.unshift(j.rootcatentry)}rootcate=catelist[0]}var m=j.modules,isHome=m=='home'||m=='homepage',isList=m=='list'||m=='listpage',isFinal=m=='final'||m=='finalpage',isMy=m=='my'||m=='mypage',isPost=m=='post'||m=='postpage';Namespace.config={j:j,city:city,cate:cate,rootcate:rootcate,locallist:locallist,catelist:catelist,isHome:isHome,isList:isList,isFinal:isFinal,isMy:isMy,isPost:isPost};})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('dom','event',function(Frame,Namespace,event){var dom=Namespace.dom={_NAME_ATTRS:(function(){var result={'cellpadding':'cellPadding','cellspacing':'cellSpacing','colspan':'colSpan','rowspan':'rowSpan','valign':'vAlign','usemap':'useMap','frameborder':'frameBorder'};if(Frame.isIE&&!(Frame.isIE8)&&!(Frame.isIE9)){result['for']='htmlFor';result['class']='className'}else{result['htmlFor']='for';result['className']='class'}return result})(),create:function(tagName,options){Frame.log('log','create:argc='+arguments.length+';arg1='+arguments[0]+';arg2='+arguments[1]);if(arguments.length==1){var self=this,tempdiv=self.create('div',{html:tagName});return tempdiv.childNodes}else if(arguments.length==2){options=options||{};var el=document.createElement(tagName);return this.setAttr(el,options)}},clone:function(id){var el=this.get(id);if(Frame.isElement(el))return el.cloneNode(arguments[1]!==false);return null},remove:function(id){var el=this.get(id);if(el.parentNode){el.parentNode.removeChild(el)}},clear:function(id){var el=this.get(id);if(Frame.isElement(el)){el.innerHTML=""}},show:function(id){var el=this.get(id);if(Frame.isElement(el)&&el.style.display){el.style.display=""}},hide:function(id){var el=this.get(id);if(Frame.isElement(el)&&el.style.display!="none"){el.style.display="none"}},get:function(id){if('string'==typeof id||id instanceof String){return document.getElementById(id)}else if(id&&id.nodeName&&(id.nodeType==1||id.nodeType==9)){return id}return null},getText:function(id){var element=this.get(id);if(!element)return'';if(element.nodeType=='3'){return element.nodeValue}else if(element.childNodes){var childrens=element.childNodes,texts=[];for(var i=0,leni=childrens.length;i<leni;i++){texts.push(this.getText(childrens[i]))}return texts.join('')}var txt='',element=document.getElementsByTagName('div')[1],pos=element,i=0,count=element,stack=[element];while(i++<200){console.log(stack,pos);if(stack.length==0){break}if(pos==null){pos=stack.pop();if(pos.nextSibling){pos=pos.nextSibling;stack.push(pos)}else{if(pos.nodeType==3){txt+=pos.nodeValue}pos=null}}else{if(pos.firstChild){pos=pos.firstChild;stack.push(pos)}else if(pos.nextSibling){pos=pos.nextSibling;stack.push(pos)}else{if(pos.nodeType==3){txt+=pos.nodeValue}pos=null}}}},contain:function(p,c){var n=c;while(n&&n!=p)try{n=n.parentNode}catch(error){n=p}return n===p},getOuterHTML:function(el){var el=this.get(el);if(!el)return'';var div=this.create("DIV",{});div.appendChild(this.clone(el));return div.innerHTML},setAttr:function(element,key,value){Frame.log('log','setAttr:argc='+arguments.length+';arg1='+arguments[0]+';arg2='+arguments[1]+';arg3='+arguments[2]);if(arguments.length==3){element=this.get(element);if('style'==key){element.style.cssText=value}else if('html'==key){element.innerHTML=value}else if('listeners'==key){for(var eventName in value){event.on(element,eventName,value[eventName])}}else if('childrens'==key){for(var i=0,leni=value.length;i<leni;i++){if(Frame.isElement(value[i])){element.appendChild(value[i])}}}else{key=this._NAME_ATTRS[key]||key;element.setAttribute(key,value)}return element}else if(arguments.length==2){element=this.get(element);var attributes=arguments[1];for(var key in attributes){this.setAttr(element,key,attributes[key])}return element}}};var classHelper={addClass:function(element,className){element=this.get(element);if(!element)return;if(!this.hasClass(element,className)){element.className+=' '+className}},removeClass:function(element,className){element=this.get(element);if(!element)return;if(this.hasClass(element,className)){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');element.className=element.className.replace(reg,' ')}},hasClass:function(element,className){element=this.get(element);if(!element)return false;return-1<(" "+element.className+" ").indexOf(" "+className+" ")}};var domload={__scanList:[],__scanHandler:null,__scanInterval:500,__attachOnload:function(element,fn){if(Frame.isIE){element.attachEvent("onload",fn)}else{element.onload=fn}},__agency:function(o,element){var me=this;o.hosting=true;this.__attachOnload(element,function(){me.__call(o,element)})},__call:function(o,element){o.loaded=true;for(var i=0,leni=o.listeners.length;i<leni;i++){if(typeof o.listeners[i]=='function')o.listeners[i].call(element)}},__isLoaded:function(el){if(el){if(el.tagName&&el.tagName=='iframe'){try{if(el.contentWindow.document.readyState=='complete'){return true}}catch(e){};me.__agency(o,el);return false}else if(el.tagName&&el.tagName=='img'){if(el.readyState=='complete'||el.complete){return true}me.__agency(o,el);return false}else return true}else return false},onload:function(id,fn){for(var i=0,leni=this.__scanList.length;i<leni;i++){if(this.__scanList[i].id==id){if(this.__scanList[i].loaded==true){fn.call(this.get(id));return}else{this.__scanList[i].listeners.push(fn);return}}}this.__scanList.push({id:id,loaded:false,listeners:[fn],hosting:false});this.start()},start:function(){var me=this;if(!this.__scanHandler){this.__scanHandler=setInterval(function(){var c=0;for(var i=0,leni=me.__scanList.length;i<leni;i++){var o=me.__scanList[i];if(o.loaded||o.hosting){c++;continue}var el=me.get(o.id);if(me.__isLoaded(el)){me.__call(o,el)}}if(c==me.__scanList.length)me.stop()},this.__scanInterval)}},stop:function(){clearInterval(this.__scanHandler);this.__scanHandler=null}};Frame.apply(dom,classHelper);Frame.apply(dom,domload)})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('event','',function(Namespace,Frame){var getDom=function(id){if('string'==typeof id||id instanceof String){return document.getElementById(id)}else if(id&&id.nodeName&&(id.nodeType==1||id.nodeType==3||id.nodeType==9)){return id}return null};Namespace.event={getButton:function(event){if(Frame.isIE)button=(event.button<2)?"LEFT":((event.button==4)?"MIDDLE":"RIGHT");elsebutton=(event.which<2)?"LEFT":((event.which==2)?"MIDDLE":"RIGHT");return button},_listeners:[],_eventFilter:{},on:function(element,type,listener){element=getDom(element);if(!element)return;type=type.replace(/^on/i,'');var realListener=function(ev){listener.call(element,ev)},self=this,lis=self._listeners,filter=self._eventFilter,afterFilter,realType=type;type=type.toLowerCase();if(filter&&filter[type]){afterFilter=filter[type](element,type,realListener);realType=afterFilter.type;realListener=afterFilter.listener}if(element.addEventListener){element.addEventListener(realType,realListener,false)}else if(element.attachEvent){element.attachEvent('on'+realType,realListener)}lis[lis.length]=[element,type,listener,realListener,realType];return element},un:function(element,type,listener){element=getDom(element);if(!element)return;type=(type||"").replace(/^on/i,'').toLowerCase();var self=this,lis=self._listeners,len=lis.length,isRemoveAllTypes=!type,isRemoveAllListeners=!listener,item,realType,realListener;while(len--){item=lis[len];if((isRemoveAllTypes||item[1]===type)&&(item[0]===element)&&(isRemoveAllListeners||item[2]===listener)){realType=item[4];realListener=item[3];if(element.removeEventListener){element.removeEventListener(realType,realListener,false)}else if(element.detachEvent){element.detachEvent('on'+realType,realListener)}lis.splice(len,1)}}return element},once:function(element,type,listener){element=getDom(element);var self=this;function onceListener(event){listener.call(element,event);self.un(element,type,onceListener)}self.on(element,type,onceListener);return element},stop:function(event){var e=this;e.stopPropagation(event);e.preventDefault(event)},stopPropagation:function(event){if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}},preventDefault:function(event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}},get:function(event,win){return new this.EventArg(event,win)},getKeyCode:function(event){return event.which||event.keyCode},getPageX:function(event){var result=event.pageX,doc=document;if(!result&&result!==0){result=(event.clientX||0)+(doc.documentElement.scrollLeft||doc.body.scrollLeft)}return result},getPageY:function(event){var result=event.pageY,doc=document;if(!result&&result!==0){result=(event.clientY||0)+(doc.documentElement.scrollTop||doc.body.scrollTop)}return result},getTarget:function(event){return event.target||event.srcElement},EventArg:function(event,win){win=win||window;event=event||win.event;var doc=win.document;this.target=(event.target)||event.srcElement;this.keyCode=event.which||event.keyCode;for(var k in event){var item=event[k];if('function'!=typeof item){this[k]=item}}if(!this.pageX&&this.pageX!==0){this.pageX=(event.clientX||0)+(doc.documentElement.scrollLeft||doc.body.scrollLeft);this.pageY=(event.clientY||0)+(doc.documentElement.scrollTop||doc.body.scrollTop)}this._event=event},_unload:function(){var self=Namespace.event,lis=self._listeners,len=lis.length,standard=!!window.removeEventListener,item,el;while(len--){item=lis[len];if(item[1]=='unload'){continue}if(!(el=item[0])){continue}if(el.removeEventListener){el.removeEventListener(item[1],item[3],false)}else if(el.detachEvent){el.detachEvent('on'+item[1],item[3])}}if(standard){window.removeEventListener('unload',Frame.event._unload,false)}else{window.detachEvent('onunload',Frame.event._unload)}}};Namespace.event.EventArg.prototype.preventDefault=function(){if(this._event.preventDefault){this._event.preventDefault()}else{this._event.returnValue=false}return this};Namespace.event.EventArg.prototype.stopPropagation=function(){if(this._event.stopPropagation){this._event.stopPropagation()}else{this._event.cancelBubble=true}return this};Namespace.event.EventArg.prototype.stop=function(){return this.stopPropagation().preventDefault()};(function(){function extend(target,source){for(var p in source){if(source.hasOwnProperty(p)){target[p]=source[p]}}return target};function values(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=source[k]}}return result};keys={keydown:1,keyup:1,keypress:1},mouses={click:1,dblclick:1,mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1},htmls={abort:1,blur:1,change:1,error:1,focus:1,load:Frame.isIE?0:1,reset:1,resize:1,scroll:1,select:1,submit:1,unload:Frame.isIE?0:1},bubblesEvents={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},parameters={"KeyEvents":["bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],"MouseEvents":["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],"HTMLEvents":["bubbles","cancelable"],"UIEvents":["bubbles","cancelable","view","detail"],"Events":["bubbles","cancelable"]};extend(bubblesEvents,keys);extend(bubblesEvents,mouses);function parse(array,source){var i=0,size=array.length,obj={};for(;i<size;i++){obj[array[i]]=source[array[i]];delete source[array[i]]}return obj};function eventsHelper(type,eventType,options){options=extend({},options);var param=values(parse(parameters[eventType],options)),evnt=document.createEvent(eventType);param.unshift(type);if("KeyEvents"==eventType){evnt.initKeyEvent.apply(evnt,param)}else if("MouseEvents"==eventType){evnt.initMouseEvent.apply(evnt,param)}else if("UIEvents"==eventType){evnt.initUIEvent.apply(evnt,param)}else{evnt.initEvent.apply(evnt,param)}extend(evnt,options);return evnt};function eventObject(options){var evnt;if(document.createEventObject){evnt=document.createEventObject();extend(evnt,options)}return evnt};function keyEvents(type,options){options=parse(parameters["KeyEvents"],options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"KeyEvents",options)}catch(keyError){try{evnt=eventsHelper(type,"Events",options)}catch(evtError){evnt=eventsHelper(type,"UIEvents",options)}}}else{options.keyCode=options.charCode>0?options.charCode:options.keyCode;evnt=eventObject(options)}return evnt};function mouseEvents(type,options){options=parse(parameters["MouseEvents"],options);var evnt;if(document.createEvent){evnt=eventsHelper(type,"MouseEvents",options);if(options.relatedTarget&&!evnt.relatedTarget){if("mouseout"==type.toLowerCase()){evnt.toElement=options.relatedTarget}else if("mouseover"==type.toLowerCase()){evnt.fromElement=options.relatedTarget}}}else{options.button=options.button==0?1:options.button==1?4:Frame.isNumber(options.button)?options.button:0;evnt=eventObject(options)}return evnt};function htmlEvents(type,options){options.bubbles=bubblesEvents.hasOwnProperty(type);options=parse(parameters["HTMLEvents"],options);var evnt;if(document.createEvent){try{evnt=eventsHelper(type,"HTMLEvents",options)}catch(htmlError){try{evnt=eventsHelper(type,"UIEvents",options)}catch(uiError){evnt=eventsHelper(type,"Events",options)}}}else{evnt=eventObject(options)}return evnt};Namespace.event.fire=function(element,type,options){var evnt;type=type.replace(/^on/i,"");element=getDom(element);options=extend({bubbles:true,cancelable:true,view:window,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0,button:0,relatedTarget:null},options);if(keys[type]){evnt=keyEvents(type,options)}else if(mouses[type]){evnt=mouseEvents(type,options)}else if(htmls[type]){evnt=htmlEvents(type,options)}else{throw(new Error(type+" is not support!"))}if(evnt){if(element.dispatchEvent){element.dispatchEvent(evnt)}else if(element.fireEvent){element.fireEvent("on"+type,evnt)}}}})();if(window.attachEvent){window.attachEvent('onunload',Namespace.event._unload)}else{window.addEventListener('unload',Namespace.event._unload,false)}})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('extension.string','',function(Namespace,Frame){Namespace.string={format:function(format){var args=Frame.toArray(arguments,1);return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},trim:function(source){var re=/^\s+|\s+$/g;return source.replace(re,"")},leftPad:function(source,size,ch){var result=String(source);if(!ch){ch=" "}while(result.length<size){result=ch+result}return result},escape:function(string){return string.replace(/('|\\)/g,"\\$1")},substringEx:function(source,length){if(source.length*2<=length)return source;var index=0;for(var i=0,leni=source.length;i<leni;i++){if(source.charCodeAt(i)>128){index+=2}else{index++}if(index==length){return source.substring(0,i+1)}else if(index==length+1){return source.substring(0,i)}}return source},getLengthEx:function(source){var index=0;for(var i=0,leni=source.length;i<leni;i++){if(source.charCodeAt(i)>128){index+=2}else{index++}}return index},getShortText:function(source,length){if(length<3)return'...';return this.getLengthEx(source)>length?this.substringEx(source,length-3)+'...':source}}})})(this,this.document);(function(global,DOC,undefined){boot.declare('general.defaultvalue','event',function(Namespace,Frame,event){Namespace.defaultvalue={elements:[],interval:null,init:function(){var self=this,inputs=document.getElementsByTagName("input");for(var i=0,leni=inputs.length;i<leni;i++){if(inputs[i].type=="text"&&!Frame.isEmpty(inputs[i].getAttribute("fdv"))){this.elements.push(inputs[i])}}var textareas=document.getElementsByTagName("textarea");for(var i=0,leni=textareas.length;i<leni;i++){if(!Frame.isEmpty(textareas[i].getAttribute("fdv"))){this.elements.push(textareas[i])}}for(var i=0,len=this.elements.length;i<len;i++){event.on(this.elements[i],"focus",this.onfocus);event.on(this.elements[i],"blur",this.onblur);this.onfocus.call(this.elements[i]);this.onblur.call(this.elements[i])}this.interval=setInterval(function(){self.refresh()},1000)},onfocus:function(){this.style.color='#000';if(this.value==this.getAttribute("fdv")){this.value=""}},onblur:function(){if(this.value==""||this.value==this.getAttribute("fdv")){this.style.color='#999';this.value=this.getAttribute('fdv')}},refresh:function(){var self=this;for(var i=0,leni=self.elements.length;i<leni;i++){if(self.elements[i].value==self.elements[i].getAttribute("fdv")){self.elements[i].style.color='#999'}else{self.elements[i].style.color='#000'}}}};Frame.init(function(){if(location.search.indexOf('placeholder=debug')==-1){Namespace.defaultvalue.init()}})})})(this,this.document);﻿(function(global,DOC,undefined){boot.declare('business.withTopBar','dom,util.rookie,event,util.superCookie,business.topbar',function(Namespace,Frame,dom,rookie,event,superCookie){Namespace.withTopBar={localListData:null,localListDataToArr:[],init:function(){this.getlocalListData();this.insertTopbar('feet_final')},getlocalListData:function(){this.localListData=superCookie.get('browerListKey');if(this.localListData){this.localListDataToArr=typeof this.localListData=='string'?JSON.parse(this.localListData):this.localListData}else{return}},insertTopbar:function(id){var dataArr=this.localListDataToArr;if(dataArr==0)return;var localListDataCount=dataArr.length;var str='';str+='<h4 class="category">最近浏览的筛选条件</h4>';for(var i=0;i<localListDataCount;i++){str+='<li class="item"><a href='+dataArr[i].url+'  class="topbar-category-item-left">'+dataArr[i].local+"</a></li>"}str+='<h4 class="category">最近浏览的信息</h4>';var reid=document.getElementById(id);var newID=document.createElement("ul");newID.id="feet_listLs";newID.innerHTML=str;reid.parentNode.insertBefore(newID,reid);try{console.log('读取到的数据',localArr)}catch(e){}}}});boot.require('dom, business.withTopBar',function(Frame,dom,withTopBar){dom.onload('feet_final',function(){withTopBar.init()})})})(this,this.document);