/*
 * jQuery UI Autocomplete 1.9m6
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
(function(d){var i=0;d.widget("ui.autocomplete",{version:"1.9m6",defaultElement:"<input>",options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,f,g;this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(a.options.disabled||a.element.prop("readOnly"))g=f=true;else{g=f=false;var e=d.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:f=true;a._move("previousPage",c);break;case e.PAGE_DOWN:f=true;a._move("nextPage",c);break;case e.UP:f=true;a._move("previous",c);c.preventDefault();break;case e.DOWN:f=true;a._move("next",c);c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:if(a.menu.active){f=
true;c.preventDefault()}case e.TAB:if(!a.menu.active)break;a.menu.select(c);break;case e.ESCAPE:a._value(a.term);a.close(c);break;default:a._searchTimeout(c)}}}).bind("keypress.autocomplete",function(c){if(f){f=false;c.preventDefault()}else{var e=d.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:a._move("previousPage",c);break;case e.PAGE_DOWN:a._move("nextPage",c);break;case e.UP:a._move("previous",c);c.preventDefault();break;case e.DOWN:a._move("next",c);c.preventDefault()}}}).bind("input.autocomplete",
function(c){if(g){g=false;c.preventDefault()}else a._searchTimeout(c)}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a._value()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",
b)[0]).mousedown(function(c){var e=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(h){h.target!==a.element[0]&&h.target!==e&&!d.contains(e,h.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({input:d(),focus:function(c,e){var h=e.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:h})&&/^key/.test(c.originalEvent.type)&&a._value(h.value)},select:function(c,e){var h=e.item.data("item.autocomplete"),
j=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=j;setTimeout(function(){a.previous=j;a.selectedItem=h},1)}false!==a._trigger("select",c,{item:h})&&a._value(h.value);a.term=a._value();a.close(c);a.selectedItem=h},blur:function(){a.menu.element.is(":visible")&&a._value()!==a.term&&a._value(a.term)}}).zIndex(this.element.zIndex()+1).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe()},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove()},_setOption:function(a,b){this._super("_setOption",a,b);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,f;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(g,c){c(d.ui.autocomplete.filter(b,g.term))}}else if(typeof this.options.source==="string"){f=this.options.source;this.source=function(g,
c){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:f,data:g,dataType:"json",autocompleteRequest:++i,success:function(e){this.autocompleteRequest===i&&c(e)},error:function(){this.autocompleteRequest===i&&c([])}})}}else this.source=this.options.source},_searchTimeout:function(a){var b=this;b.searching=setTimeout(function(){if(b.term!=b.element.val()){b.selectedItem=null;b.search(null,a)}},b.options.delay)},search:function(a,b){a=a!=null?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);
clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(a)a=this._normalize(a);this._trigger("response",null,{content:a});if(!this.options.disabled&&a&&a.length){this._suggest(a);this._trigger("open")}else this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);
if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this._trigger("close",a)}},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+
1);this._renderMenu(b,a);this.menu.blur();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var f=this;d.each(b,function(g,c){f._renderItem(a,c)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},
_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this._value(this.term);this.menu.blur()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var f=RegExp(d.ui.autocomplete.escapeRegex(b),
"i");return d.grep(a,function(g){return f.test(g.label||g.value||g)})}})})(jQuery);
