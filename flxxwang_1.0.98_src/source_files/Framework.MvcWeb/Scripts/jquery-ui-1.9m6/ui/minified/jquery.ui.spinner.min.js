/*
 * jQuery UI Spinner 1.9m6
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Spinner
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.button.js
 */
(function(d){function e(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}d.widget("ui.spinner",{version:"1.9m6",defaultElement:"<input>",widgetEventPrefix:"spin",options:{incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._value(this.element.val(),true);this._draw();this._bind(this._events);this._refresh()},_getCreateOptions:function(){var a=
{},b=this.element;d.each(["min","max","step"],function(c,g){var f=b.attr(g);if(f!==undefined&&f.length)a[g]=f});return a},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val()},blur:function(a){this._refresh();this.uiSpinner.removeClass("ui-state-active");this.previous!==this.element.val()&&this._trigger("change",a)},mousewheel:function(a,b){if(b){if(!this.spinning&&
!this._start(a))return false;this._spin((b>0?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=setTimeout(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(a){a.preventDefault();document.activeElement!==this.element[0]&&this.element.focus();if(this._start(a)!==false)this._repeat(null,d(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){if(d(a.currentTarget).hasClass("ui-state-active")){if(this._start(a)===
false)return false;this._repeat(null,d(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(a);this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()===a.height()&&a.height(a.height());
this.options.disabled&&this.disable()},_keydown:function(a){var b=this.options,c=d.ui.keyCode;switch(a.keyCode){case c.UP:this._repeat(null,1,a);return true;case c.DOWN:this._repeat(null,-1,a);return true;case c.PAGE_UP:this._repeat(null,b.page,a);return true;case c.PAGE_DOWN:this._repeat(null,-b.page,a);return true}return false},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon ui-icon-triangle-1-n'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon ui-icon-triangle-1-s'>&#9660;</span></a>"},
_start:function(a){if(!this.spinning&&this._trigger("start",a)===false)return false;if(!this.counter)this.counter=1;return this.spinning=true},_repeat:function(a,b,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,c)},a);this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;if(!this.counter)this.counter=1;c=this._adjustValue(c+a*this._increment(this.counter));if(!this.spinning||this._trigger("spin",b,{value:c})!==false){this._value(c);
this.counter++}},_increment:function(a){var b=this.options.incremental;if(b)return d.isFunction(b)?b(a):Math.floor(a*a*a/5E4-a*a/500+17*a/200+1);return 1},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null)a=Math.max(a,this._precisionOf(this.options.min));return a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");return b===-1?0:a.length-b-1},_adjustValue:function(a){var b,c=this.options;b=c.min!==null?c.min:0;a=Math.round((a-b)/c.step)*c.step;
a=parseFloat((b+a).toFixed(this._precision()));if(c.max!==null&&a>c.max)return c.max;if(c.min!==null&&a<c.min)return c.min;return a},_stop:function(a){if(this.spinning){clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",a)}},_setOption:function(a,b){this._super("_setOption",a,b);if(a==="disabled")if(b){this.element.prop("disabled",true);this.buttons.button("disable")}else{this.element.prop("disabled",false);this.buttons.button("enable")}},
_setOptions:e(function(a){this._super("_setOptions",a);this._value(this.element.val())}),_parse:function(a){if(typeof a==="string"&&a!=="")a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a):+a;return a===""||isNaN(a)?null:a},_format:function(a){if(a==="")return"";return window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},
_value:function(a,b){var c;if(a!==""){c=this._parse(a);if(c!==null){b||(c=this._adjustValue(c));a=this._format(c)}}this.element.val(a);this._refresh()},destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this._super("destroy");this.uiSpinner.replaceWith(this.element)},stepUp:e(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||
1)*this.options.step)},stepDown:e(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:e(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:e(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
