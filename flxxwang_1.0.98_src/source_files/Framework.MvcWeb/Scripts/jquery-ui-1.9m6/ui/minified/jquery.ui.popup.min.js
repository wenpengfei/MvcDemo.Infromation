/*
 * jQuery UI Popup 1.9m6
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Popup
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(c){var e=0;c.widget("ui.popup",{version:"1.9m6",options:{position:{my:"left top",at:"left bottom"}},_create:function(){if(!this.options.trigger)this.options.trigger=this.element.prev();if(!this.element.attr("id")){this.element.attr("id","ui-popup-"+e++);this.generatedId=true}if(!this.element.attr("role")){this.element.attr("role","dialog");this.generatedRole=true}this.options.trigger.attr("aria-haspopup","true").attr("aria-owns",this.element.attr("id"));this.element.addClass("ui-popup");
this.close();this._bind(this.options.trigger,{keydown:function(a){c.ui.button&&this.options.trigger.is("a:ui-button")&&a.keyCode==c.ui.keyCode.SPACE&&a.preventDefault();a.keyCode==c.ui.keyCode.SPACE&&this.options.trigger.is("a:not(:ui-button)")&&this.options.trigger.trigger("click",a);if(a.keyCode==c.ui.keyCode.DOWN){a.preventDefault();this.options.trigger.trigger("click",a)}},click:function(a){a.preventDefault();if(!this.isOpen){clearTimeout(this.closeTimer);this._delay(function(){this.open(a)},
1)}}});this.element.is(":ui-menu")||this._bind({keydown:function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this.element),d=b.first();b=b.last();if(a.target===b[0]&&!a.shiftKey){d.focus(1);a.preventDefault()}else if(a.target===d[0]&&a.shiftKey){b.focus(1);a.preventDefault()}}}});this._bind({focusout:function(a){this.closeTimer=this._delay(function(){this.close(a)},100)},focusin:function(){clearTimeout(this.closeTimer)}});this._bind({keyup:function(a){if(a.keyCode==c.ui.keyCode.ESCAPE&&
this.element.is(":visible")){this.close(a);this.options.trigger.focus()}}});this._bind(document,{click:function(a){this.isOpen&&!c(a.target).closest(".ui-popup").length&&this.close(a)}})},_destroy:function(){this.element.show().removeClass("ui-popup").removeAttr("aria-hidden").removeAttr("aria-expanded").unbind("keypress.ui-popup");this.options.trigger.removeAttr("aria-haspopup").removeAttr("aria-owns");this.generatedId&&this.element.removeAttr("id");this.generatedRole&&this.element.removeAttr("role")},
open:function(a){var b=c.extend({},{of:this.options.trigger},this.options.position);this.element.show().attr("aria-hidden","false").attr("aria-expanded","true").position(b);if(this.element.is(":ui-menu")){this.element.menu("focus",a,this.element.children("li").first());this.element.focus()}else{b=this.element.find(":tabbable");this.removeTabIndex=false;if(!b.length){if(!this.element.is(":tabbable")){this.element.attr("tabindex","0");this.removeTabIndex=true}b=b.add(this.element[0])}b.first().focus(1)}this.options.trigger.attr("tabindex",
-1);this.isOpen=true;this._trigger("open",a)},close:function(a){this.element.hide().attr("aria-hidden","true").attr("aria-expanded","false");this.options.trigger.attr("tabindex",0);this.removeTabIndex&&this.element.removeAttr("tabindex");this.isOpen=false;this._trigger("close",a)}})})(jQuery);
